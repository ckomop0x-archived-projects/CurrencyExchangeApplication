{"version":3,"sources":["components/CurrencySelector/currency-selector.module.scss","config.js","helpers/currencyConverter.js","helpers/inputFilter.js","helpers/pow.js","components/AppBarContainer.jsx","components/CurrencyLine.jsx","components/DropdownSelector/DropdownSelector.jsx","components/CurrencySelector/CurrencySelector.jsx","components/Footer.jsx","App.jsx","helpers/api.js","index.js","registerServiceWorker.js"],"names":["module","exports","config","API_KEY","DELAY","currencyConverter","currencyOne","currencyTwo","value","floor","Math","pow","inputFilter","line","currencyMask","currencyMaskWithOne","currencyMaskWithDot","test","exec","x","n","result","i","React","memo","AppBar","position","title","style","textAlign","background","padding","Toolbar","variant","Typography","color","onChange","className","margin","width","boxSizing","TextField","type","currency","handleChange","currencyNames","useState","anchorEl","setAnchorEl","handleClose","handleCurrencySelect","event","currencyName","currentTarget","getAttribute","Button","aria-controls","aria-haspopup","onClick","Menu","keepMounted","open","Boolean","onClose","map","MenuItem","key","data-currencyname","handleChangeOne","handleChangeTwo","rates","styles","currencySelector","Object","keys","currencyRate","props","time","year","Date","getFullYear","moment","format","fontWeight","href","textDecoration","App","seconds","setSeconds","setRates","timestamp","setTimestamp","setCurrencyOne","setCurrencyTwo","currencyOneValue","setCurrencyOneValue","currencyTwoValue","setCurrencyTwoValue","error","setError","useEffect","options","getData","url","axios","method","headers","then","data","catch","err","errorText","message","setInterval","state","text","floatingLabelText","target","window","addEventListener","e","preventDefault","prompt","ReactDOM","render","document","getElementById","navigator","swUrl","process","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log"],"mappings":"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","file":"static/js/main.5d4a390e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"currencySelector\":\"currency-selector_currencySelector__28ys7\",\"currencyRate\":\"currency-selector_currencyRate__xf4i2\"};","const config = {\n  API_KEY: '2926cc269ba74564be3c4488db03cfb3',\n  DELAY: 3000000,\n};\n\nexport default config;\n","import { pow } from './';\n/**\n *\n * @param currencyOne\n * @param currencyTwo\n * @param value\n * @param floor\n * @returns {number}\n */\nexport const currencyConverter = (currencyOne = 1, currencyTwo = 1, value = 1, floor = 2) => (\n  (Math.floor((value * (currencyTwo / currencyOne)) * pow(10, floor))) / pow(10, floor)\n);\n","export const inputFilter = (value = '') => {\n  let line = '';\n  const currencyMask = /(?!0)(?:\\d+)?(?:\\.)?(?:\\d)?(?:\\d)/;\n  const currencyMaskWithOne = /(?!0)(?:\\d+)(?:\\.)(?:\\d)/;\n  const currencyMaskWithDot = /(?!0)(?:\\d+)(?:\\.)/;\n  if (currencyMaskWithDot.test(value) && !currencyMaskWithOne.test(value)) {\n    line = currencyMaskWithDot.exec(value);\n  } else if (currencyMask.test(value)) {\n    line = currencyMask.exec(value);\n  }\n\n  return line[0] || '';\n};\n","/**\n * @param x\n * @param n\n * @returns {*}\n */\nexport function pow(x, n) {\n  let result = x;\n  for (let i = 1; i < n; i += 1) {\n    result *= x;\n  }\n  return result;\n}\n","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst AppBarContainer = () => (\n  <AppBar\n    position=\"relative\"\n    title=\"\"\n    style={{\n      textAlign: 'center',\n      background: '#004d9a',\n      padding: 10\n    }}>\n    <Toolbar variant=\"dense\">\n      <Typography variant=\"h6\" color=\"inherit\">\n        Exchange your Currency\n      </Typography>\n    </Toolbar>\n  </AppBar>\n);\n\nexport default React.memo(AppBarContainer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { style } from 'typestyle';\nimport TextField from '@material-ui/core/TextField';\n\nconst CurrencyLine = ({ value, onChange }) => {\n  const className = style({\n    margin: 20,\n    width: '90% !important',\n    boxSizing: 'border-box'\n  });\n\n  return <TextField className={className} type=\"text\" value={value} onChange={onChange} />;\n};\n\nCurrencyLine.propTypes = {\n  floatingLabelText: PropTypes.string,\n  value: PropTypes.node,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default React.memo(CurrencyLine);\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nconst DropdownSelector = ({ currency, handleChange, currencyNames }) => {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleCurrencySelect = (event) => {\n    const currencyName = event.currentTarget.getAttribute('data-currencyname');\n    handleChange(currencyName);\n    handleClose();\n  };\n\n  return (\n    <>\n      <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\n        {currency}\n      </Button>\n      <Menu anchorEl={anchorEl} keepMounted open={Boolean(anchorEl)} onClose={handleClose}>\n        {currencyNames.map((currencyName) => (\n          <MenuItem\n            key={currencyName}\n            data-currencyname={currencyName}\n            onClick={handleCurrencySelect}>\n            {currencyName}\n          </MenuItem>\n        ))}\n      </Menu>\n    </>\n  );\n};\n\nexport default React.memo(DropdownSelector);\n","import React from 'react';\n\nimport DropdownSelector from '../DropdownSelector';\nimport { currencyConverter } from '../../helpers';\nimport styles from './currency-selector.module.scss';\n\nconst CurrencySelector = ({\n  currencyOne,\n  currencyTwo,\n  handleChangeOne,\n  handleChangeTwo,\n  rates\n}) => {\n  return (\n    <div className={styles.currencySelector}>\n      <DropdownSelector\n        currencyNames={Object.keys(rates)}\n        currency={currencyOne}\n        handleChange={handleChangeOne}\n      />\n      <span className={styles.currencyRate}>\n        {currencyConverter(rates[currencyOne], rates[currencyTwo], 1, 4)}\n      </span>\n      <DropdownSelector\n        currencyNames={Object.keys(rates)}\n        currency={currencyTwo}\n        handleChange={handleChangeTwo}\n      />\n    </div>\n  );\n};\n\nexport default React.memo(CurrencySelector);\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\n\nconst Footer = (props) => {\n  const { time } = props;\n  const date = new Date();\n  const year = date.getFullYear();\n\n  return (\n    <div>\n      <div style={{ textAlign: 'center', margin: 20 }}>\n        {time && `Currencies rates timestamp: ${moment(time * 1000).format('Do MMM YYYY, h:mm a')}`}\n      </div>\n      <div style={{ textAlign: 'center', margin: 20, fontWeight: 'bold' }}>\n        &copy; 2017-{year} &nbsp;\n        <a href=\"http://ckomop0x.github.io\" style={{ color: '#004d9a', textDecoration: 'none' }}>\n          Pavel Klochkov\n        </a>\n      </div>\n    </div>\n  );\n};\n\nFooter.propTypes = {\n  time: PropTypes.number\n};\n\nexport default React.memo(Footer);\n","import React, { useEffect, useState } from 'react';\nimport config from './config';\nimport './App.css';\nimport { api, currencyConverter, inputFilter } from './helpers/';\nimport { AppBarContainer, CurrencyLine, CurrencySelector, Footer } from './components';\n\nconst App = () => {\n  const [seconds, setSeconds] = useState(null);\n  const [rates, setRates] = useState(null);\n  const [timestamp, setTimestamp] = useState(0);\n  const [currencyOne, setCurrencyOne] = useState('EUR');\n  const [currencyTwo, setCurrencyTwo] = useState('USD');\n  const [currencyOneValue, setCurrencyOneValue] = useState('');\n  const [currencyTwoValue, setCurrencyTwoValue] = useState('');\n  const [error, setError] = useState({});\n\n  useEffect(() => {\n    const getData = api({\n      url: `https://openexchangerates.org/api/latest.json?app_id=${config.API_KEY}`\n    });\n\n    getData\n      .then(({ data: { rates, timestamp } }) => {\n        setTimestamp(timestamp);\n        setRates(rates);\n      })\n      .catch((err) => {\n        setError({\n          error: true,\n          errorText: \"Can't connect\",\n          message: `${err}`\n        });\n      });\n\n    setInterval(() => {\n      getData\n        .then((result) => {\n          setRates(result.data.rates);\n        })\n        .catch((err) => {\n          setError({\n            error: true,\n            errorText: \"Can't connect\",\n            message: `${err}`\n          });\n        });\n\n      setSeconds({ seconds: this.state.seconds + 30 });\n    }, config.DELAY);\n  }, [seconds]);\n\n  const changeCurrencyOneValue = (event) => {\n    setCurrencyOneValue(inputFilter(event.target.value));\n    setCurrencyTwoValue(\n      currencyConverter(rates[currencyOne], rates[currencyTwo], inputFilter(event.target.value))\n    );\n  };\n\n  const changeCurrencyTwoValue = (event) => {\n    setCurrencyTwoValue(inputFilter(event.target.value));\n    setCurrencyOneValue(\n      currencyConverter(rates[currencyTwo], rates[currencyOne], inputFilter(event.target.value))\n    );\n  };\n\n  const handleChangeOne = (value) => {\n    setCurrencyOne(value);\n    setCurrencyOneValue('');\n    setCurrencyTwoValue('');\n  };\n\n  const handleChangeTwo = (value) => {\n    setCurrencyTwo(value);\n    setCurrencyOneValue('');\n    setCurrencyTwoValue('');\n  };\n\n  return (\n    <div className=\"container\">\n      {error && <div>{error.text}</div>}\n      {rates && (\n        <main className=\"App\">\n          <AppBarContainer />\n          <CurrencySelector\n            currencyOne={currencyOne}\n            currencyTwo={currencyTwo}\n            rates={rates}\n            handleChangeOne={handleChangeOne}\n            handleChangeTwo={handleChangeTwo}\n          />\n          <CurrencyLine\n            floatingLabelText={currencyOne}\n            value={currencyOneValue}\n            onChange={changeCurrencyOneValue}\n          />\n          <CurrencyLine\n            floatingLabelText={currencyTwo}\n            value={currencyTwoValue}\n            onChange={changeCurrencyTwoValue}\n          />\n          <Footer time={timestamp} />\n        </main>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import axios from 'axios';\n\nexport const api = options => axios({\n  method: options.method || 'GET', // api method\n  url: options.url,  // api URL\n  headers: { 'Content-Type': 'application/json' }\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport './index.css';\n\nwindow.addEventListener('beforeinstallprompt', e => {\n    e.preventDefault();\n    e.prompt();\n});\n\nReactDOM.render(<App />, document.getElementById('root'));\n// check for support\nif ('serviceWorker' in navigator) {\n    try {\n        // calls navigator.serviceWorker.register('sw.js');\n        registerServiceWorker();\n    } catch (e) {\n        console.error(e);\n    }\n}\n\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nexport default function register() {\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n    navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the old content will have been purged and\n                // the fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in your web app.\n                console.log('New content is available; please refresh.');\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n  });\n  // }\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}